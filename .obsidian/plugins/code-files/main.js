/** GENERATED BY OBSIDIAN-PLUGIN-CLI, DO NOT EDIT */
var A=Object.create;var x=Object.defineProperty;var R=Object.getOwnPropertyDescriptor;var z=Object.getOwnPropertyNames,L=Object.getOwnPropertySymbols,B=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable;var D=(i,e,t)=>e in i?x(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,y=(i,e)=>{for(var t in e||(e={}))N.call(e,t)&&D(i,t,e[t]);if(L)for(var t of L(e))W.call(e,t)&&D(i,t,e[t]);return i};var M=i=>x(i,"__esModule",{value:!0});var U=(i,e)=>{M(i);for(var t in e)x(i,t,{get:e[t],enumerable:!0})},H=(i,e,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of z(e))!N.call(i,s)&&s!=="default"&&x(i,s,{get:()=>e[s],enumerable:!(t=R(e,s))||t.enumerable});return i},f=i=>H(M(x(i!=null?A(B(i)):{},"default",i&&i.__esModule&&"default"in i?{get:()=>i.default,enumerable:!0}:{value:i,enumerable:!0})),i);var r=(i,e,t)=>new Promise((s,a)=>{var n=c=>{try{o(t.next(c))}catch(p){a(p)}},u=c=>{try{o(t.throw(c))}catch(p){a(p)}},o=c=>c.done?s(c.value):Promise.resolve(c.value).then(n,u);o((t=t.apply(i,e)).next())});U(exports,{default:()=>G});var O=f(require("obsidian"));var I={extensions:["ts","tsx","js","jsx","py"],folding:!0,lineNumbers:!0,minimap:!0,semanticValidation:!0,syntaxValidation:!0},v="code-editor";var q=f(require("obsidian"));var b=(i,e,t,s,a)=>{let n=t,u=app.getTheme()==="obsidian"?"vs-dark":"vs",o=new URLSearchParams;o.append("context",s),o.append("lang",e),o.append("theme",u),o.append("background","transparent"),o.append("folding",i.settings.folding?"true":"false"),o.append("lineNumbers",i.settings.lineNumbers?"on":"off"),o.append("minimap",i.settings.minimap?"true":"false"),o.append("javascriptDefaults","true"),o.append("typescriptDefaults","true"),o.append("javascriptDefaultsNoSemanticValidation",i.settings.semanticValidation?"false":"true"),o.append("typescriptDefaultsNoSemanticValidation",i.settings.semanticValidation?"false":"true"),o.append("javascriptDefaultsNoSyntaxValidation",i.settings.syntaxValidation?"false":"true"),o.append("typescriptDefaultsNoSyntaxValidation",i.settings.syntaxValidation?"false":"true");let c=document.createElement("iframe");c.src=`https://embeddable-monaco.lukasbach.com?${o.toString()}`,c.style.width="100%",c.style.height="100%";let p=(g,$)=>{var j;(j=c==null?void 0:c.contentWindow)==null||j.postMessage(y({type:g},$),"*")};return window.addEventListener("message",({data:g})=>{switch(g.type){case"ready":{p("change-value",{value:n}),p("change-language",{language:e}),p("change-background",{background:"transparent",theme:u});break}case"change":{g.context===s&&(n=g.value,a==null||a());break}default:break}}),{iframe:c,send:p,clear:()=>{p("change-value",{value:""}),n=""},getValue:()=>n,setValue:g=>{n=g,p("change-value",{value:g})},destroy:()=>{c.remove()}}};var E=i=>{switch(i){case"js":case"es6":case"jsx":case"cjs":case"mjs":case"javascript":return"javascript";case"ts":case"tsx":case"cts":case"mts":case"typescript":return"typescript";case"json":return"json";case"py":case"rpy":case"pyu":case"cpy":case"gyp":case"gypi":case"python":return"python";case"css":return"css";case"html":case"htm":case"shtml":case"xhtml":case"mdoc":case"jsp":case"asp":case"aspx":case"jshtm":return"html";case"cpp":case"cc":case"cxx":case"hpp":case"hh":case"hxx":return"cpp";case"graphql":case"gql":return"graphql";case"java":case"jav":return"java";case"php":case"php4":case"php5":case"phtml":case"ctp":return"php";case"sql":return"sql";case"yaml":case"yml":return"yaml";case"bat":case"batch":return"bat";case"lua":return"lua";case"rb":case"rbx":case"rjs":case"gemspec":case"ruby":return"ruby";case"markdown":case"mdown":case"mkdn":case"mkd":case"mdwn":case"mdtxt":case"mdtext":case"mdx":case"md":return"markdown";case"r":case"rhistory":case"rmd":case"rprofile":case"rt":return"r";case"ftl":case"ftlh":case"ftlx":return"freemarker2";case"rst":return"restructuredtext";case"hcl":case"tf":case"tfvars":return"hcl";case"ini":case"properties":case"gitconfig":return"ini";case"pug":case"jade":return"pug";case"dart":return"dart";case"rs":case"rlib":return"rust";case"less":return"less";case"cls":return"apex";case"tcl":return"tcl";case"abap":return"abap";case"ecl":return"ecl";case"pla":return"pla";case"cmd":return"bat";case"vb":return"vb";case"sb":return"sb";case"m3":case"i3":case"mg":case"ig":return"m3";case"go":return"go";case"s":return"mips";case"pl":case"pm":return"perl";case"wgsl":return"wgsl";case"twig":return"twig";case"scss":return"scss";case"redis":return"redis";case"sh":case"bash":return"shell";case"scala":case"sc":case"sbt":return"scala";case"jl":return"julia";case"dax":case"msdax":return"msdax";case"lex":return"lexon";case"cshtml":return"razor";case"bicep":return"bicep";case"azcli":return"azcli";case"swift":case"Swift":return"swift";case"flow":return"flow9";case"xml":case"xsd":case"dtd":case"ascx":case"csproj":case"config":case"props":case"targets":case"wxi":case"wxl":case"wxs":case"xaml":case"svgz":case"opf":case"xslt":case"xsl":return"xml";case"kt":case"kts":return"kotlin";case"cypher":case"cyp":return"cypher";case"coffee":return"coffeescript";case"fs":case"fsi":case"ml":case"mli":case"fsx":case"fsscript":return"fsharp";case"scm":case"ss":case"sch":case"rkt":return"scheme";case"rq":return"sparql";case"aes":return"aes";case"liquid":case"html.liquid":return"liquid";case"pas":case"p":case"pp":return"pascal";case"ex":case"exs":return"elixir";case"qs":return"qsharp";case"cs":case"csx":case"cake":return"csharp";case"clj":case"cljs":case"cljc":case"edn":return"clojure";case"mligo":return"cameligo";case"sol":return"sol";case"proto":return"proto";case"dats":case"sats":case"hats":return"postiats";case"ligo":return"pascaligo";case"dockerfile":return"dockerfile";case"handlebars":case"hbs":return"handlebars";case"pq":case"pqm":return"powerquery";case"m":return"objective-c";case"sv":case"svh":return"systemverilog";case"v":case"vh":return"verilog";case"st":case"iecst":case"iecplc":case"lc3lib":return"st";case"c":case"h":return"c";default:return"plaintext"}};var k=class extends q.TextFileView{constructor(e,t){super(e);this.plugin=t;this.id=k.i++}getDisplayText(){var e,t;return(t=(e=this.file)==null?void 0:e.name)!=null?t:"Code Editor"}getViewType(){return v}getContext(e){var t,s,a;return(a=(s=e==null?void 0:e.path)!=null?s:(t=this.file)==null?void 0:t.path)!=null?a:""}onClose(){var e=t=>super[t];return r(this,null,function*(){yield e("onClose").call(this),this.codeEditor.destroy()})}onLoadFile(e){var t=s=>super[s];return r(this,null,function*(){yield t("onLoadFile").call(this,e),this.codeEditor=b(this.plugin,E(e.extension),this.initialValue,this.getContext(e),()=>this.requestSave()),this.contentEl.style.overflow="hidden",this.contentEl.append(this.codeEditor.iframe)})}onUnloadFile(e){var t=s=>super[s];return r(this,null,function*(){yield t("onUnloadFile").call(this,e),this.codeEditor.destroy()})}onOpen(){var e=t=>super[t];return r(this,null,function*(){yield e("onOpen").call(this)})}clear(){this.codeEditor.clear()}getViewData(){return this.codeEditor.getValue()}setViewData(e){var t;this.initialValue=e,(t=this.codeEditor)==null||t.setValue(e)}static openFile(e,t){let s=t.app.workspace.getLeaf(!0),a=new k(s,t);a.file=e,a.onLoadFile(e),s.open(a),a.load(),t.app.workspace.revealLeaf(s)}},h=k;h.i=0;var l=f(require("obsidian")),C=class extends l.Modal{constructor(e,t){super(e.app);this.plugin=e;this.fileName="My Code File";this.fileExtension=this.plugin.settings.extensions[0];this.parent=t!=null?t:this.plugin.app.vault.getRoot()}onOpen(){let{contentEl:e}=this;e.style.display="flex",e.style.alignItems="center";let t=new l.TextComponent(e);t.inputEl.style.flexGrow="1",t.inputEl.style.marginRight="10px",t.setValue(this.fileName),t.inputEl.addEventListener("keypress",n=>{n.key==="Enter"&&this.complete()}),t.onChange(n=>{this.fileName=n});let s=new l.DropdownComponent(e);s.selectEl.style.marginRight="10px",s.addOptions(this.plugin.settings.extensions.reduce((n,u)=>(n[u]=u,n),{})),s.setValue(this.fileExtension),s.onChange(n=>{this.fileExtension=n}),s.selectEl.addEventListener("keypress",n=>{n.key==="Enter"&&this.complete()});let a=new l.ButtonComponent(e);a.setCta(),a.setButtonText("Create"),a.onClick(()=>this.complete()),t.inputEl.focus()}complete(){return r(this,null,function*(){this.close();let t=`${(this.parent instanceof l.TFile?this.parent.parent:this.parent).path}/${this.fileName}.${this.fileExtension}`,s=this.app.vault.getAbstractFileByPath((0,l.normalizePath)(t));if(s&&s instanceof l.TFile){new l.Notice("File already exists"),this.app.workspace.getLeaf(!0).openFile(s);return}let a=yield this.app.vault.create(t,"",{});this.app.workspace.getLeaf(!0).openFile(a)})}onClose(){let{contentEl:e}=this;e.empty()}};var d=f(require("obsidian")),T=class extends d.PluginSettingTab{constructor(e,t){super(e,t);this.plugin=t}display(){let{containerEl:e}=this;e.empty(),e.createEl("h2",{text:"Code Files Settings"}),new d.Setting(e).setName("File Extensions").setDesc("Files with these extensions will show up in the sidebar, and will be available to create new files from. Seperated by commas. Changes to the file extensions need a restart to take effect.").addText(t=>t.setPlaceholder("js,ts").setValue(this.plugin.settings.extensions.join(",")).onChange(s=>r(this,null,function*(){this.plugin.settings.extensions=s.split(","),yield this.plugin.saveSettings()}))),new d.Setting(e).setName("Folding").setDesc("Editor will support code block folding.").addToggle(t=>t.setValue(this.plugin.settings.folding).onChange(s=>r(this,null,function*(){this.plugin.settings.folding=s,yield this.plugin.saveSettings()}))),new d.Setting(e).setName("Line Numbers").setDesc("Editor will show line numbers.").addToggle(t=>t.setValue(this.plugin.settings.lineNumbers).onChange(s=>r(this,null,function*(){this.plugin.settings.lineNumbers=s,yield this.plugin.saveSettings()}))),new d.Setting(e).setName("Minimap").setDesc("Editor will show a minimap.").addToggle(t=>t.setValue(this.plugin.settings.minimap).onChange(s=>r(this,null,function*(){this.plugin.settings.minimap=s,yield this.plugin.saveSettings()}))),new d.Setting(e).setName("Semantic Validation").setDesc("Editor will show semantic validation errors.").addToggle(t=>t.setValue(this.plugin.settings.semanticValidation).onChange(s=>r(this,null,function*(){this.plugin.settings.semanticValidation=s,yield this.plugin.saveSettings()}))),new d.Setting(e).setName("Syntax Validation").setDesc("Editor will show syntax validation errors.").addToggle(t=>t.setValue(this.plugin.settings.syntaxValidation).onChange(s=>r(this,null,function*(){this.plugin.settings.syntaxValidation=s,yield this.plugin.saveSettings()})))}};var V=f(require("obsidian"));var m=class{constructor(e){this.plugin=e;this.start=0;this.end=0;this.isInValidFence=!1;this.initializeStartAndEnd(),this.validateFence()}static create(e){return new m(e)}initializeStartAndEnd(){var t,s;this.editor=(t=this.plugin.app.workspace.activeEditor)==null?void 0:t.editor;let e=(s=this.editor)==null?void 0:s.getCursor();if(!(!this.editor||!e)){this.start=e.line,this.end=e.line;do this.start--;while(this.start>=0&&!this.editor.getLine(this.start).startsWith("```"));do this.end++;while(this.end<this.editor.lineCount()&&!this.editor.getLine(this.end).startsWith("```"))}}validateFence(){if(!this.editor||this.start<0||this.end>=this.editor.lineCount())return;let e=0;for(let t=0;t<this.start;t++)this.editor.getLine(t).startsWith("```")&&e++;e%2!=1&&(this.isInValidFence=!0)}isInFence(){return this.isInValidFence}getFenceData(){if(!this.editor||!this.isInValidFence)return null;let e="";for(let n=this.start+1;n<this.end;n++)e+=`${this.editor.getLine(n)}
`;let t=e.slice(0,e.length-1),s=this.editor.getLine(this.start).slice(3).trim(),a=E(s);return{content:t,language:a}}getEditor(){return this.editor}getBounds(){return[this.start,this.end]}replaceFenceContent(e){var t;(t=this.editor)==null||t.replaceRange(`${e}
`,{line:this.start+1,ch:0},{line:this.end,ch:0})}};var w=class extends V.Modal{constructor(e,t,s,a){super(e.app);this.plugin=e;this.code=t;this.language=s;this.onSave=a}onOpen(){super.onOpen(),this.codeEditor=b(this.plugin,this.language,this.code,"modal-editor"),this.contentEl.append(this.codeEditor.iframe),this.modalEl.setCssProps({"--dialog-width":"90vw","--dialog-height":"90vh"}),this.modalEl.style.height="var(--dialog-height)",this.modalEl.querySelector(".modal-close-button").style.background="var(--modal-background)"}onClose(){super.onClose(),this.onSave(this.codeEditor.getValue())}static openOnCurrentCode(e){let t=m.create(e);if(!t.isInFence()){new V.Notice("Your cursor is currently not in a valid code block.");return}let s=t.getFenceData();!s||new w(e,s.content,s.language,a=>t.replaceFenceContent(a)).open()}};var F=f(require("obsidian"));var P=class extends F.SuggestModal{constructor(e,t){super(e.app);this.plugin=e;this.cssFiles=t}getSuggestions(e){let t=this.cssFiles.filter(s=>s.toLowerCase().includes(e.toLowerCase()));return e?[...t,`Create new snippet "${e}.css"`]:t}onChooseSuggestion(e){return r(this,null,function*(){let t=e.match(/Create new snippet "(.*)\.css"/);if(t==null?void 0:t[1]){let s=`${this.app.vault.configDir}/snippets/${t[1]}.css`;yield this.plugin.app.vault.adapter.write(s,""),h.openFile(new F.TFile(this.app.vault,s),this.plugin),new Notification("Make sure to enable new snippet in options.");return}h.openFile(new F.TFile(this.app.vault,e),this.plugin)})}renderSuggestion(e,t){return t.innerHTML=e,t}};var S=class extends O.Plugin{onload(){return r(this,null,function*(){yield this.loadSettings(),this.registerView(v,e=>new h(e,this));try{this.registerExtensions(this.settings.extensions,v)}catch(e){console.log("code-files plugin error:",e),new Notification("Code Files Plugin Error",{body:`Could not register extensions ${this.settings.extensions.join(", ")}; there are probably some other extensions that already registered them. Please change code-files's extensions in the plugin settings or remove conflicting plugins.`})}this.addCommand({id:"open-codeblock-in-monaco",name:"Open current code block in Monaco Editor",callback:()=>{w.openOnCurrentCode(this)}}),this.addCommand({id:"open-current-file-in-monaco",name:"Open current file in Monaco Editor",callback:()=>{var t;let e=(t=this.app.workspace.activeEditor)==null?void 0:t.file;if(!e){new Notification("No viable file open");return}h.openFile(e,this)}}),this.addCommand({id:"open-css-snippet",name:"Edit CSS Snippet",callback:()=>r(this,null,function*(){let e=(yield this.app.vault.adapter.list(`${this.app.vault.configDir}/snippets`)).files;new P(this,e).open()})}),this.registerEvent(this.app.workspace.on("file-menu",(e,t)=>{e.addItem(s=>{s.setTitle("Create Code File").setIcon("file-json").onClick(()=>{new C(this,t).open()})})})),this.registerEvent(this.app.workspace.on("editor-menu",e=>{!m.create(this).isInFence()||e.addItem(t=>{t.setTitle("Edit Code Block in Monaco Editor").setIcon("code").onClick(()=>{w.openOnCurrentCode(this)})})})),this.addRibbonIcon("file-json","Create Code File",()=>{new C(this).open()}),this.addCommand({id:"create",name:"Create new Code File",callback:()=>{new C(this).open()}}),this.addSettingTab(new T(this.app,this))})}onunload(){}loadSettings(){return r(this,null,function*(){this.settings=y(y({},I),yield this.loadData())})}saveSettings(){return r(this,null,function*(){yield this.saveData(this.settings)})}};var G=S;0&&(module.exports={});
